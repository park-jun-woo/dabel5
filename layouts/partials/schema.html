{{ if .IsHome }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "{{ .Site.Title }}",
  "url": "{{ site.Home.Permalink }}",
  "inLanguage": "{{ .Lang }}",
  "author": {
    "@type": "Person",
    "name": "{{ .Site.Params.author }}"
  }
}
</script>
{{ else if .IsPage }}
{{- $ogImage := "/og-image.webp" -}}
{{- with .Params.image -}}
  {{- $ogImage = . -}}
{{- else -}}
  {{- with findRE `!\[.*?\]\((/images/[^)]+)\)` .RawContent 1 -}}
    {{- with index . 0 -}}
      {{- $ogImage = replaceRE `!\[.*?\]\((/images/[^)]+)\)` "$1" . -}}
    {{- end -}}
  {{- end -}}
{{- end -}}
{{- $ogImageAbs := printf "%s%s" (strings.TrimRight "/" .Site.BaseURL) $ogImage -}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  {{- if eq .Slug "about" }}
  "@type": "ProfilePage",
  "name": "{{ .Title }}",
  "image": "{{ $ogImageAbs }}",
  "description": "{{ with .Params.summary }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}",
  {{- if not .Lastmod.IsZero }}
  "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05-07:00" }}",
  {{- end }}
  {{- else }}
  "@type": "Article",
  "headline": "{{ .Title }}",
  {{- if not .Date.IsZero }}
  "datePublished": "{{ .Date.Format "2006-01-02T15:04:05-07:00" }}",
  {{- end }}
  {{- if not .Lastmod.IsZero }}
  "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05-07:00" }}",
  {{- end }}
  "image": "{{ $ogImageAbs }}",
  "description": "{{ with .Params.summary }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}",
  "publisher": {
    "@type": "Organization",
    "name": "DABEL5",
    "url": "https://dabel5.org/"
  },
  {{- end }}
  "inLanguage": "{{ .Lang }}",
  "author": {
    "@type": "Person",
    "name": "{{ .Site.Params.author }}"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ .Permalink }}"
  }
}
</script>
{{- if .Section }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "{{ .Site.Title }}",
      "item": "{{ .Site.Home.Permalink }}"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "{{ .CurrentSection.Title }}",
      "item": "{{ .CurrentSection.Permalink }}"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "{{ .Title }}"
    }
  ]
}
</script>
{{- end }}
{{ end }}
